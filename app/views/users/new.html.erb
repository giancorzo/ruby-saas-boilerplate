<% content_for :scripts do %>
  <script type="text/javascript">
    $().ready(function() {

      $.validator.addMethod("customEmail",
          function(value, element) {
              return /^\w+([-+.']\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/.test(value);
          },
          "Please enter a valid email address."
      );

      $("form").validate({
        rules: {
          "user[email]" : {
            required: true,
            customEmail: true
          },
          "user[role]": {
            required: true
          }
        },
        submitHandler: function(form) {
          form.submit();
        },
        errorPlacement: function(error, element) {
          switch (element.attr("name")) {
            case "user[role]":
              $(element).parents(".col-sm-10").append(error);
              break;
            default:
              error.insertAfter(element);
          }
        }
      });
    });
</script>
<% end %>
<% content_for :page_title do %>
  <div class="small-header">
      <div class="hpanel">
          <div class="panel-body">
              <div id="hbreadcrumb" class="pull-right">
                  <ol class="hbreadcrumb breadcrumb">
                      <li><%= link_to "Dashboard", root_path %></li>
                      <li>
                          <span>Users</span>
                      </li>
                      <li class="active">
                          <span>Invite</span>
                      </li>
                  </ol>
              </div>
              <h2 class="font-light m-b-xs">
                  Invite User
              </h2>
              <small>Invite new users to use the application</small>
          </div>
      </div>
  </div>
<% end %>
<div class="row">
  <div class="col-lg-5">
    <div class="hpanel hblue">
      <div class="panel-body">
        <%= simple_form_for @user, :html => { class: "form-horizontal"} do |f| %>
        <div class="form-group">
          <%= f.label :name, class: "col-sm-2 control-label", required:false %>
          <div class="col-sm-10">
            <%= f.input :name, label: false, required:false, :input_html => {class: "form-control"} %>
          </div>
        </div>
        <div class="form-group">
          <%= f.label :email, class: "col-sm-2 control-label", required:false %>
          <div class="col-sm-10">
            <%= f.input :email, label: false, :input_html => {class: "form-control"} %>
          </div>
        </div>
        <div class="form-group">
          <label class="col-sm-2 control-label">User Type</label>
          <div class="col-sm-10">
            <% User.roles.keys.each do |role| %>
              <div class="radio">
                <label class="">
                  <input class="radio_buttons optional form-control i-checks"
                  type="radio"
                  value="<%= role %>"
                  name="user[role]"
                  id="user_role_<%= role %>">
                  <span style="font-weight:bold;"><%= I18n.t("activerecord.attributes.user.role.#{role}") %></span>
                  <p style="margin-left:35px;"><%= role_description(role) %></p>
                </label>
              </div>
            <% end %>
          </div>
        </div>
        <div class="form-actions">
          <%= f.button :submit, "Invite User", class: "btn btn-primary" %>
        </div>
        <% end %>
      </div>
    </div>
  </div>
</div>
